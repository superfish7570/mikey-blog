{"ast":null,"code":"import _slicedToArray from\"/Users/mikey/Desktop/yc-blog/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import ReactDOM from'react-dom';import{HashRouter as Router,Switch,Route,Link}from'react-router-dom';import{BasicSetting}from\"./pages\";import{HomeManagePage}from\"./pages\";import{Provider,useDispatch}from\"react-redux\";import store from\"./redux/store\";import'./style.scss';import\"normalize.css\";import'antd/dist/antd.css';import styles from'./style.module.scss';import{Layout,Menu}from\"antd\";import{getChangeSchemaAction}from\"./redux/action\";import{get}from\"../utils/http\";import{parseJsonByString}from\"../common/utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Header=Layout.Header,Sider=Layout.Sider,Content=Layout.Content;// 自定义的hooks\nvar useCollapsed=function useCollapsed(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),collapsed=_useState2[0],setCollapsed=_useState2[1];var toggleCollapsed=function toggleCollapsed(){return setCollapsed(!collapsed);};return{collapsed:collapsed,toggleCollapsed:toggleCollapsed};};// 自定义 hooks 把重复的事情 集合起来 schema 传数据 取数据 统一管理\nvar useStore=function useStore(){var dispatch=useDispatch();var changeSchema=function changeSchema(schema){dispatch(getChangeSchemaAction(schema));};return{changeSchema:changeSchema};};var Wrapper=function Wrapper(){var handleHomePage=function handleHomePage(){return window.location.href='/';};var _useCollapsed=useCollapsed(),collapsed=_useCollapsed.collapsed,toggleCollapsed=_useCollapsed.toggleCollapsed;var _useStore=useStore(),changeSchema=_useStore.changeSchema;useEffect(function(){get('/api/schema/getLatestOne',{}).then(function(res){var _res$data;var data=res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.data;data&&changeSchema(parseJsonByString(data.schema,{}));});},[changeSchema]);return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsx(Sider,{className:styles.sidebar,trigger:null,collapsible:true,collapsed:collapsed,children:/*#__PURE__*/_jsxs(Menu,{theme:\"dark\",mode:\"inline\",defaultSelectedKeys:['adminHome'],children:[/*#__PURE__*/_jsx(Menu.Item,{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"span\",{className:\"iconfont\",children:\"\\uE821\\u9996\\u9875\\u5185\\u5BB9\\u7BA1\\u7406\"})})},'adminHome'),/*#__PURE__*/_jsx(Menu.Item,{children:/*#__PURE__*/_jsx(Link,{to:\"/setting\",children:/*#__PURE__*/_jsx(\"span\",{className:\"iconfont\",children:\"\\uE821\\u57FA\\u7840\\u5185\\u5BB9\\u914D\\u7F6E\"})})},'adminSetting'),/*#__PURE__*/_jsx(Menu.Item,{onClick:handleHomePage,children:/*#__PURE__*/_jsx(\"span\",{className:\"iconfont\",children:\"\\uE629\\u8FD4\\u56DE\\u7528\\u6237\\u9875\\u9762\"})},'adminBack')]})}),/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsx(Header,{className:styles.header,children:collapsed?/*#__PURE__*/_jsx(\"span\",{className:\"iconfont\",onClick:toggleCollapsed,children:\"\\uE62C\"}):/*#__PURE__*/_jsx(\"span\",{className:\"iconfont\",onClick:toggleCollapsed,children:\"\\uE62A\"})}),/*#__PURE__*/_jsx(Content,{className:styles.content,children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:HomeManagePage}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/setting\",component:BasicSetting}),/*#__PURE__*/_jsx(Route,{})]})})]})]})});};ReactDOM.render(/*#__PURE__*/_jsx(Provider,{store:store,children:/*#__PURE__*/_jsx(Wrapper,{})}),document.getElementById('root'));","map":{"version":3,"names":["React","useState","useEffect","ReactDOM","HashRouter","Router","Switch","Route","Link","BasicSetting","HomeManagePage","Provider","useDispatch","store","styles","Layout","Menu","getChangeSchemaAction","get","parseJsonByString","Header","Sider","Content","useCollapsed","collapsed","setCollapsed","toggleCollapsed","useStore","dispatch","changeSchema","schema","Wrapper","handleHomePage","window","location","href","then","res","data","sidebar","header","content","render","document","getElementById"],"sources":["/Users/mikey/Desktop/yc-blog/src/admin/index.js"],"sourcesContent":["import React, {useState,useEffect} from 'react';\nimport ReactDOM from 'react-dom';\nimport {HashRouter as Router, Switch, Route, Link} from 'react-router-dom';\nimport {BasicSetting} from \"./pages\";\n\nimport {HomeManagePage} from \"./pages\";\nimport {Provider, useDispatch} from \"react-redux\";\nimport store from \"./redux/store\";\n\nimport './style.scss';\nimport \"normalize.css\";\nimport 'antd/dist/antd.css';\n\nimport styles from './style.module.scss';\nimport {Layout, Menu} from \"antd\";\nimport {getChangeSchemaAction} from \"./redux/action\";\nimport {get} from \"../utils/http\";\nimport {parseJsonByString} from \"../common/utils\";\n\nconst {Header, Sider, Content} = Layout;\n// 自定义的hooks\nconst useCollapsed = () => {\n    const [collapsed, setCollapsed] = useState(false);\n    const toggleCollapsed = () => setCollapsed(!collapsed);\n    return {collapsed, toggleCollapsed};\n}\n// 自定义 hooks 把重复的事情 集合起来 schema 传数据 取数据 统一管理\nconst useStore = () => {\n    const dispatch = useDispatch();\n    const changeSchema = (schema) => {\n        dispatch(getChangeSchemaAction(schema));\n    }\n    return { changeSchema};\n}\nconst Wrapper = () => {\n    const handleHomePage = () => window.location.href = '/';\n    const {collapsed, toggleCollapsed} = useCollapsed();\n    const {changeSchema} = useStore();\n    useEffect(()=> {\n        get('/api/schema/getLatestOne',{}).then((res)=>{\n            const data = res?.data?.data;\n            data && changeSchema(parseJsonByString(data.schema,{}));\n        })\n    },[changeSchema]);\n    return (\n        <Router>\n            <Layout>\n                <Sider className={styles.sidebar} trigger={null} collapsible collapsed={collapsed}>\n                    <Menu theme=\"dark\" mode=\"inline\" defaultSelectedKeys={['adminHome']}>\n                        <Menu.Item key='adminHome'>\n                            <Link to='/'>\n                                <span className='iconfont'>&#xe821;首页内容管理</span>\n                            </Link>\n                        </Menu.Item>\n                        <Menu.Item key='adminSetting'>\n                            <Link to='/setting'>\n                                <span className='iconfont'>&#xe821;基础内容配置</span>\n                            </Link>\n                        </Menu.Item>\n                        <Menu.Item key='adminBack' onClick={handleHomePage}>\n                            <span className='iconfont'>&#xe629;返回用户页面</span>\n                        </Menu.Item>\n                    </Menu>\n                </Sider>\n                <Layout>\n                    <Header className={styles.header}>\n                        {collapsed ?\n                            <span className='iconfont' onClick={toggleCollapsed}>&#xe62c;</span>\n                            : <span className='iconfont' onClick={toggleCollapsed}>&#xe62a;</span>\n                        }\n                    </Header>\n                    <Content className={styles.content}>\n                        <Switch>\n                            <Route exact path='/' component={HomeManagePage}></Route>\n                            <Route exact path='/setting' component={BasicSetting}></Route>\n                            <Route></Route>\n                        </Switch>\n                    </Content>\n                </Layout>\n            </Layout>\n        </Router>\n    )\n}\n\n\nReactDOM.render(\n    <Provider store={store}>\n        <Wrapper/>\n    </Provider>,\n    document.getElementById('root')\n);\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
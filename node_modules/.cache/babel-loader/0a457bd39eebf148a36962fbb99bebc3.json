{"ast":null,"code":"import React,{useCallback}from'react';import styles from'./style.module.scss';import{Button,Input}from'antd';import{parseJsonByString}from\"../../../utils/paresJsonByString\";import request from\"../../../utils/service\";import{useStore}from\"../../hook/useStore\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var BasicSetting=function BasicSetting(){// 折叠 收缩\nvar _useStore=useStore(),changePageAttribute=_useStore.changePageAttribute,_useStore$schema=_useStore.schema,schema=_useStore$schema===void 0?{}:_useStore$schema,changeSchema=_useStore.changeSchema;var _schema$attributes=schema.attributes,attributes=_schema$attributes===void 0?{}:_schema$attributes;var _attributes$title=attributes.title,title=_attributes$title===void 0?'':_attributes$title;// 保存 数据存到数据库\nvar handleSaveButtonClick=function handleSaveButtonClick(){request.post('/api/schema/save',{schema:JSON.stringify(schema)}).then(function(){});};// 重置还原 最开始的想法是当你点击 Reset 方法的时候, 你需要做的只是 调用一下 resetSchema的方法就好了, 至于怎么重置交给子组件来决定\n// 最后思考\nvar handleResetButtonClick=function handleResetButtonClick(){// 先获取最新的 schema\nrequest.get('/api/schema/getLatestOne').then(function(response){var data=response===null||response===void 0?void 0:response.data;data&&changeSchema(parseJsonByString(data.schema,{}));});};// 标题改变\nvar handleTitleChange=useCallback(function(e){changePageAttribute('title',e.target.value);},[changePageAttribute]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.row,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.title,children:\"\\u9875\\u9762\\u6807\\u9898\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.content,children:/*#__PURE__*/_jsx(Input,{value:title,onChange:handleTitleChange})})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.buttons,children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:handleSaveButtonClick,children:\"\\u4FDD\\u5B58\\u57FA\\u7840\\u914D\\u7F6E\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",className:styles.reset,onClick:handleResetButtonClick,children:\"\\u91CD\\u7F6E\\u57FA\\u7840\\u914D\\u7F6E\"})]})]});};","map":{"version":3,"names":["React","useCallback","styles","Button","Input","parseJsonByString","request","useStore","BasicSetting","changePageAttribute","schema","changeSchema","attributes","title","handleSaveButtonClick","post","JSON","stringify","then","handleResetButtonClick","get","response","data","handleTitleChange","e","target","value","row","content","buttons","reset"],"sources":["/Users/mikey/Desktop/yc-blog/src/admin/pages/basicSetting/BasicSetting.jsx"],"sourcesContent":["import React, {useCallback} from 'react';\nimport styles from './style.module.scss';\nimport {Button, Input} from 'antd';\nimport {parseJsonByString} from \"../../../utils/paresJsonByString\";\nimport request from \"../../../utils/service\";\nimport {useStore} from \"../../hook/useStore\";\n\nexport const BasicSetting = () => {\n    // 折叠 收缩\n    const {changePageAttribute, schema = {}, changeSchema} = useStore();\n    const {attributes = {}} = schema;\n    const {title = ''} = attributes;\n\n    // 保存 数据存到数据库\n    const handleSaveButtonClick = () => {\n        request.post('/api/schema/save', {\n            schema: JSON.stringify(schema),\n        }).then(() => {\n        })\n    }\n    // 重置还原 最开始的想法是当你点击 Reset 方法的时候, 你需要做的只是 调用一下 resetSchema的方法就好了, 至于怎么重置交给子组件来决定\n    // 最后思考\n    const handleResetButtonClick = () => {\n        // 先获取最新的 schema\n        request.get('/api/schema/getLatestOne').then((response) => {\n            const data = response?.data;\n            data && changeSchema(parseJsonByString(data.schema,{}));\n        });\n    }\n    // 标题改变\n    const handleTitleChange = useCallback((e) => {\n        changePageAttribute('title', e.target.value);\n    }, [changePageAttribute]);\n    return (\n        <div>\n            <div className={styles.row}>\n                <div className={styles.title}>页面标题</div>\n                <div className={styles.content}>\n                    <Input value={title} onChange={handleTitleChange}/>\n                </div>\n            </div>\n            <div className={styles.buttons}>\n                <Button type='primary' onClick={handleSaveButtonClick}>保存基础配置</Button>\n                <Button type='primary' className={styles.reset} onClick={handleResetButtonClick}>重置基础配置</Button>\n            </div>\n        </div>\n    );\n};\n"],"mappings":"AAAA,MAAOA,MAAP,EAAeC,WAAf,KAAiC,OAAjC,CACA,MAAOC,OAAP,KAAmB,qBAAnB,CACA,OAAQC,MAAR,CAAgBC,KAAhB,KAA4B,MAA5B,CACA,OAAQC,iBAAR,KAAgC,kCAAhC,CACA,MAAOC,QAAP,KAAoB,wBAApB,CACA,OAAQC,QAAR,KAAuB,qBAAvB,C,wFAEA,MAAO,IAAMC,aAAY,CAAG,QAAfA,aAAe,EAAM,CAC9B;AACA,cAAyDD,QAAQ,EAAjE,CAAOE,mBAAP,WAAOA,mBAAP,4BAA4BC,MAA5B,CAA4BA,MAA5B,2BAAqC,EAArC,kBAAyCC,YAAzC,WAAyCA,YAAzC,CACA,uBAA0BD,MAA1B,CAAOE,UAAP,CAAOA,UAAP,6BAAoB,EAApB,oBACA,sBAAqBA,UAArB,CAAOC,KAAP,CAAOA,KAAP,4BAAe,EAAf,mBAEA;AACA,GAAMC,sBAAqB,CAAG,QAAxBA,sBAAwB,EAAM,CAChCR,OAAO,CAACS,IAAR,CAAa,kBAAb,CAAiC,CAC7BL,MAAM,CAAEM,IAAI,CAACC,SAAL,CAAeP,MAAf,CADqB,CAAjC,EAEGQ,IAFH,CAEQ,UAAM,CACb,CAHD,EAIH,CALD,CAMA;AACA;AACA,GAAMC,uBAAsB,CAAG,QAAzBA,uBAAyB,EAAM,CACjC;AACAb,OAAO,CAACc,GAAR,CAAY,0BAAZ,EAAwCF,IAAxC,CAA6C,SAACG,QAAD,CAAc,CACvD,GAAMC,KAAI,CAAGD,QAAH,SAAGA,QAAH,iBAAGA,QAAQ,CAAEC,IAAvB,CACAA,IAAI,EAAIX,YAAY,CAACN,iBAAiB,CAACiB,IAAI,CAACZ,MAAN,CAAa,EAAb,CAAlB,CAApB,CACH,CAHD,EAIH,CAND,CAOA;AACA,GAAMa,kBAAiB,CAAGtB,WAAW,CAAC,SAACuB,CAAD,CAAO,CACzCf,mBAAmB,CAAC,OAAD,CAAUe,CAAC,CAACC,MAAF,CAASC,KAAnB,CAAnB,CACH,CAFoC,CAElC,CAACjB,mBAAD,CAFkC,CAArC,CAGA,mBACI,oCACI,aAAK,SAAS,CAAEP,MAAM,CAACyB,GAAvB,wBACI,YAAK,SAAS,CAAEzB,MAAM,CAACW,KAAvB,sCADJ,cAEI,YAAK,SAAS,CAAEX,MAAM,CAAC0B,OAAvB,uBACI,KAAC,KAAD,EAAO,KAAK,CAAEf,KAAd,CAAqB,QAAQ,CAAEU,iBAA/B,EADJ,EAFJ,GADJ,cAOI,aAAK,SAAS,CAAErB,MAAM,CAAC2B,OAAvB,wBACI,KAAC,MAAD,EAAQ,IAAI,CAAC,SAAb,CAAuB,OAAO,CAAEf,qBAAhC,kDADJ,cAEI,KAAC,MAAD,EAAQ,IAAI,CAAC,SAAb,CAAuB,SAAS,CAAEZ,MAAM,CAAC4B,KAAzC,CAAgD,OAAO,CAAEX,sBAAzD,kDAFJ,GAPJ,GADJ,CAcH,CAxCM"},"metadata":{},"sourceType":"module"}
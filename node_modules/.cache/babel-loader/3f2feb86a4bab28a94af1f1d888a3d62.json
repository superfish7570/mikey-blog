{"ast":null,"code":"import _objectSpread from\"/Users/mikey/Desktop/yc-blog/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/mikey/Desktop/yc-blog/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import styles from\"./style.module.scss\";import{Button,Modal,Select}from\"antd\";import{SortableElement}from\"react-sortable-hoc\";import{Banner,List,Footer}from\"./component\";import{cloneDeep}from'lodash';import{useStore}from\"../../hook/useStore\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Option=Select.Option;var map={Banner:Banner,List:List,Footer:Footer};export var AreaItem=SortableElement(function(props){// 取父组件数据 就是 AreaList 组件\nvar index=props.value;var _useStore=useStore(index),pageChild=_useStore.pageChild,changePageChild=_useStore.changePageChild,removePageChild=_useStore.removePageChild;// antd ui提供的\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),isModalOpen=_useState2[0],setIsModalOpen=_useState2[1];// 控制临时弹窗\nvar _useState3=useState(cloneDeep(pageChild)),_useState4=_slicedToArray(_useState3,2),tempPageChild=_useState4[0],setTempPageChild=_useState4[1];useEffect(function(){setTempPageChild(cloneDeep(pageChild));},[pageChild]);// 展示\nvar showModal=function showModal(){setIsModalOpen(true);};// 确定\nvar handleOkClick=function handleOkClick(){setIsModalOpen(false);changePageChild(tempPageChild);};// 取消\nvar handleModalCancelClick=function handleModalCancelClick(){setIsModalOpen(false);setTempPageChild(cloneDeep(pageChild));};// 改变\nvar handleSelectChange=function handleSelectChange(value){setTempPageChild({name:value,attributes:{},children:[]});};// 给 AdminBanner 提供的方法\nvar changeTempPageChildAttributes=function changeTempPageChildAttributes(kvObj){var newTempPageChild=_objectSpread({},tempPageChild);for(var key in kvObj){newTempPageChild.attributes[key]=kvObj[key];}setTempPageChild(newTempPageChild);};// 给 AdminList 提供的方法\nvar changeTempPageChildChildren=function changeTempPageChildChildren(children){var newTempPageChild=_objectSpread({},tempPageChild);newTempPageChild.children=children;setTempPageChild(newTempPageChild);};//\nvar getComponent=function getComponent(){var name=tempPageChild.name;var Component=map[name];return Component?/*#__PURE__*/_jsx(Component,_objectSpread(_objectSpread({},tempPageChild),{},{changeAttributes:changeTempPageChildAttributes,changeChildren:changeTempPageChildChildren})):null;};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"li\",{className:styles.item,children:[/*#__PURE__*/_jsx(\"span\",{className:styles.content,onClick:showModal,children:pageChild.name?pageChild.name+'组件':'当前区块内容为空'}),/*#__PURE__*/_jsx(\"span\",{className:styles.delete,children:/*#__PURE__*/_jsx(Button,{size:\"small\",type:\"dashed\",danger:true,onClick:removePageChild,children:\"\\u5220\\u9664\"})}),/*#__PURE__*/_jsxs(Modal,{title:\"\\u9009\\u62E9\\u7EC4\\u4EF6\",open:isModalOpen,onOk:handleOkClick,onCancel:handleModalCancelClick,bodyStyle:{maxHeight:600,overflowY:'scroll'},children:[/*#__PURE__*/_jsxs(Select,{value:tempPageChild.name,className:styles.select,onChange:handleSelectChange,children:[/*#__PURE__*/_jsx(Option,{value:\"Banner\",children:\"Banner \\u7EC4\\u4EF6\"}),/*#__PURE__*/_jsx(Option,{value:\"List\",children:\"List \\u7EC4\\u4EF6\"}),/*#__PURE__*/_jsx(Option,{value:\"Footer\",children:\"Footer \\u7EC4\\u4EF6\"})]}),getComponent()]})]})});});","map":{"version":3,"names":["React","useState","useEffect","styles","Button","Modal","Select","SortableElement","Banner","List","Footer","cloneDeep","useStore","Option","map","AreaItem","props","index","value","pageChild","changePageChild","removePageChild","isModalOpen","setIsModalOpen","tempPageChild","setTempPageChild","showModal","handleOkClick","handleModalCancelClick","handleSelectChange","name","attributes","children","changeTempPageChildAttributes","kvObj","newTempPageChild","key","changeTempPageChildChildren","getComponent","Component","item","content","delete","maxHeight","overflowY","select"],"sources":["/Users/mikey/Desktop/yc-blog/src/admin/components/areaItem/AreaItem.jsx"],"sourcesContent":["import React, {useState,useEffect} from 'react';\nimport styles from \"./style.module.scss\";\nimport {Button, Modal, Select} from \"antd\";\nimport {SortableElement} from \"react-sortable-hoc\";\nimport {Banner, List,Footer} from \"./component\";\nimport {cloneDeep} from 'lodash';\nimport {useStore} from \"../../hook/useStore\";\n\nconst {Option} = Select;\nconst map = {Banner, List, Footer};\n\n\nexport const AreaItem = SortableElement((props) => {\n    // 取父组件数据 就是 AreaList 组件\n    const {value:index} = props;\n    const {pageChild, changePageChild, removePageChild} = useStore(index);\n    // antd ui提供的\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    // 控制临时弹窗\n    const [tempPageChild, setTempPageChild] = useState(cloneDeep(pageChild));\n\n    useEffect(() => {\n        setTempPageChild(cloneDeep(pageChild));\n    },[pageChild])\n\n    // 展示\n    const showModal = () => {\n        setIsModalOpen(true);\n    };\n\n    // 确定\n    const handleOkClick = () => {\n        setIsModalOpen(false);\n        changePageChild(tempPageChild);\n    };\n\n    // 取消\n    const handleModalCancelClick = () => {\n        setIsModalOpen(false);\n        setTempPageChild(cloneDeep(pageChild));\n    };\n\n    // 改变\n    const handleSelectChange = (value) => {\n        setTempPageChild({name: value, attributes: {}, children: []});\n    }\n\n    // 给 AdminBanner 提供的方法\n    const changeTempPageChildAttributes = (kvObj) => {\n        const newTempPageChild = {...tempPageChild};\n        for (let key in kvObj) {\n            newTempPageChild.attributes[key] = kvObj[key];\n        }\n        setTempPageChild(newTempPageChild);\n    }\n    // 给 AdminList 提供的方法\n    const changeTempPageChildChildren = (children) => {\n        const newTempPageChild = {...tempPageChild};\n            newTempPageChild.children= children;\n        setTempPageChild(newTempPageChild);\n    }\n    //\n    const getComponent = () => {\n        const {name} = tempPageChild;\n        const Component = map[name];\n        return Component ? (<Component {...tempPageChild} changeAttributes ={changeTempPageChildAttributes}\n                       changeChildren={changeTempPageChildChildren}/>) : null;\n    }\n    return (\n        <div>\n            <li className={styles.item}>\n                <span className={styles.content} onClick={showModal}>\n                    {pageChild.name ? pageChild.name + '组件' : '当前区块内容为空'}</span>\n                <span className={styles.delete}>\n                    <Button size='small' type='dashed' danger onClick={removePageChild}>删除</Button>\n                </span>\n                <Modal title=\"选择组件\" open={isModalOpen} onOk={handleOkClick}\n                       onCancel={handleModalCancelClick} bodyStyle={{maxHeight:600,overflowY:'scroll'}}>\n                    <Select value={tempPageChild.name} className={styles.select}\n                            onChange={handleSelectChange}>\n                        <Option value='Banner'>Banner 组件</Option>\n                        <Option value='List'>List 组件</Option>\n                        <Option value='Footer'>Footer 组件</Option>\n                    </Select>\n                    {getComponent()}\n                </Modal>\n            </li>\n        </div>\n    )\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
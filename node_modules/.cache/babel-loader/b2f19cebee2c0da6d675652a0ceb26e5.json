{"ast":null,"code":"import React from'react';import styles from'./style.module.scss';import{useDispatch,useSelector}from\"react-redux\";import{Button}from'antd';import{AreaList}from\"../../components\";import{parseJsonByString}from\"../../../common/utils\";import{getChangeSchemaAction}from\"../../redux/action\";import{get,post}from\"../../../utils/http\";// 自定义 hooks 把重复的事情 集合起来 schema 传数据 取数据 统一管理\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStore=function useStore(){var dispatch=useDispatch();var schema=useSelector(function(state){return state.homeManagePageReducer.schema;});var changeSchema=function changeSchema(schema){dispatch(getChangeSchemaAction(schema));};return{changeSchema:changeSchema,schema:schema};};export var HomeManagePage=function HomeManagePage(){// 折叠 收缩\nvar _useStore=useStore(),changeSchema=_useStore.changeSchema,schema=_useStore.schema;// 保存到数据库 post接口\nvar handleSaveButtonClick=function handleSaveButtonClick(){post('/api/schema/save',{schema:JSON.stringify(schema)}).then(function(){});};// 重置还原\nvar handleResetButtonClick=function handleResetButtonClick(){get('/api/schema/getLatestOne',{}).then(function(res){var _res$data;var data=res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.data;data&&changeSchema(parseJsonByString(data.schema,{}));});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(AreaList,{}),/*#__PURE__*/_jsxs(\"div\",{className:styles.buttons,children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:handleSaveButtonClick,children:\"\\u4FDD\\u5B58\\u533A\\u5757\\u914D\\u7F6E\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",className:styles.reset,onClick:handleResetButtonClick,children:\"\\u91CD\\u7F6E\\u533A\\u5757\\u914D\\u7F6E\"})]})]});};","map":{"version":3,"names":["React","styles","useDispatch","useSelector","Button","AreaList","parseJsonByString","getChangeSchemaAction","get","post","useStore","dispatch","schema","state","homeManagePageReducer","changeSchema","HomeManagePage","handleSaveButtonClick","JSON","stringify","then","handleResetButtonClick","res","data","buttons","reset"],"sources":["/Users/mikey/Desktop/yc-blog/src/admin/pages/home/HomeManagePage.jsx"],"sourcesContent":["import React from 'react';\nimport styles from './style.module.scss';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Button} from 'antd';\nimport {AreaList} from \"../../components\";\nimport {parseJsonByString} from \"../../../common/utils\";\nimport {getChangeSchemaAction} from \"../../redux/action\";\nimport {get,post} from \"../../../utils/http\";\n\n\n// 自定义 hooks 把重复的事情 集合起来 schema 传数据 取数据 统一管理\nconst useStore = () => {\n    const dispatch = useDispatch();\n    const schema = useSelector((state) => state.homeManagePageReducer.schema);\n    const changeSchema = (schema) => {\n        dispatch(getChangeSchemaAction(schema));\n    }\n    return {changeSchema, schema};\n}\n\nexport const HomeManagePage = () => {\n    // 折叠 收缩\n    const {changeSchema, schema} = useStore();\n\n\n    // 保存到数据库 post接口\n    const handleSaveButtonClick = () => {\n        post('/api/schema/save', {\n            schema: JSON.stringify(schema)\n        }).then(() => {\n        })\n    }\n    // 重置还原\n    const handleResetButtonClick = () => {\n        get('/api/schema/getLatestOne',{}).then((res) => {\n            const data = res?.data?.data;\n            data && changeSchema(parseJsonByString(data.schema,{}));\n        })\n    }\n\n    return (\n        <div>\n            <AreaList/>\n            <div className={styles.buttons}>\n                <Button type='primary' onClick={handleSaveButtonClick}>保存区块配置</Button>\n                <Button type='primary' className={styles.reset} onClick={handleResetButtonClick}>重置区块配置</Button>\n            </div>\n        </div>\n    );\n};\n"],"mappings":"AAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAOC,OAAP,KAAmB,qBAAnB,CACA,OAAQC,WAAR,CAAqBC,WAArB,KAAuC,aAAvC,CACA,OAAQC,MAAR,KAAqB,MAArB,CACA,OAAQC,QAAR,KAAuB,kBAAvB,CACA,OAAQC,iBAAR,KAAgC,uBAAhC,CACA,OAAQC,qBAAR,KAAoC,oBAApC,CACA,OAAQC,GAAR,CAAYC,IAAZ,KAAuB,qBAAvB,CAGA;wFACA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,EAAM,CACnB,GAAMC,SAAQ,CAAGT,WAAW,EAA5B,CACA,GAAMU,OAAM,CAAGT,WAAW,CAAC,SAACU,KAAD,QAAWA,MAAK,CAACC,qBAAN,CAA4BF,MAAvC,EAAD,CAA1B,CACA,GAAMG,aAAY,CAAG,QAAfA,aAAe,CAACH,MAAD,CAAY,CAC7BD,QAAQ,CAACJ,qBAAqB,CAACK,MAAD,CAAtB,CAAR,CACH,CAFD,CAGA,MAAO,CAACG,YAAY,CAAZA,YAAD,CAAeH,MAAM,CAANA,MAAf,CAAP,CACH,CAPD,CASA,MAAO,IAAMI,eAAc,CAAG,QAAjBA,eAAiB,EAAM,CAChC;AACA,cAA+BN,QAAQ,EAAvC,CAAOK,YAAP,WAAOA,YAAP,CAAqBH,MAArB,WAAqBA,MAArB,CAGA;AACA,GAAMK,sBAAqB,CAAG,QAAxBA,sBAAwB,EAAM,CAChCR,IAAI,CAAC,kBAAD,CAAqB,CACrBG,MAAM,CAAEM,IAAI,CAACC,SAAL,CAAeP,MAAf,CADa,CAArB,CAAJ,CAEGQ,IAFH,CAEQ,UAAM,CACb,CAHD,EAIH,CALD,CAMA;AACA,GAAMC,uBAAsB,CAAG,QAAzBA,uBAAyB,EAAM,CACjCb,GAAG,CAAC,0BAAD,CAA4B,EAA5B,CAAH,CAAmCY,IAAnC,CAAwC,SAACE,GAAD,CAAS,eAC7C,GAAMC,KAAI,CAAGD,GAAH,SAAGA,GAAH,4BAAGA,GAAG,CAAEC,IAAR,oCAAG,UAAWA,IAAxB,CACAA,IAAI,EAAIR,YAAY,CAACT,iBAAiB,CAACiB,IAAI,CAACX,MAAN,CAAa,EAAb,CAAlB,CAApB,CACH,CAHD,EAIH,CALD,CAOA,mBACI,oCACI,KAAC,QAAD,IADJ,cAEI,aAAK,SAAS,CAAEX,MAAM,CAACuB,OAAvB,wBACI,KAAC,MAAD,EAAQ,IAAI,CAAC,SAAb,CAAuB,OAAO,CAAEP,qBAAhC,kDADJ,cAEI,KAAC,MAAD,EAAQ,IAAI,CAAC,SAAb,CAAuB,SAAS,CAAEhB,MAAM,CAACwB,KAAzC,CAAgD,OAAO,CAAEJ,sBAAzD,kDAFJ,GAFJ,GADJ,CASH,CA7BM"},"metadata":{},"sourceType":"module"}
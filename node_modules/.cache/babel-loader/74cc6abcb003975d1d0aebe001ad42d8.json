{"ast":null,"code":"import React,{useCallback}from'react';import styles from'./style.module.scss';import{useDispatch,useSelector}from\"react-redux\";import{Button,Input}from'antd';import{parseJsonByString}from\"../../../common/utils\";import{getChangeSchemaAction,getChangePageAttributeAction}from\"../../redux/action\";import{post}from\"../../../utils/http\";// 自定义 hooks 把重复的事情 集合起来 schema 传数据 取数据 统一管理\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStore=function useStore(){var dispatch=useDispatch();var schema=useSelector(function(state){return state.homeManagePageReducer.schema;});var changeSchema=function changeSchema(schema){dispatch(getChangeSchemaAction(schema));};var changePageAttribute=function changePageAttribute(key,value){dispatch(getChangePageAttributeAction(key,value));};return{schema:schema,changePageAttribute:changePageAttribute,changeSchema:changeSchema};};export var BasicSetting=function BasicSetting(){// 折叠 收缩\nvar _useStore=useStore(),changePageAttribute=_useStore.changePageAttribute,_useStore$schema=_useStore.schema,schema=_useStore$schema===void 0?{}:_useStore$schema,changeSchema=_useStore.changeSchema;var _schema$attributes=schema.attributes,attributes=_schema$attributes===void 0?{}:_schema$attributes;var _attributes$title=attributes.title,title=_attributes$title===void 0?'':_attributes$title;// 保存 数据存到数据库\nvar handleSaveButtonClick=function handleSaveButtonClick(){post('/api/schema/save',{schema:JSON.stringify(schema)}).then(function(){});};// 重置还原 最开始的想法是当你点击 Reset 方法的时候, 你需要做的只是 调用一下 resetSchema的方法就好了, 至于怎么重置交给子组件来决定\n// 最后思考\nvar handleResetButtonClick=function handleResetButtonClick(){// 先获取最新的 schema\nchangeSchema(parseJsonByString(window.localStorage.schema,{}));};// 标题改变\nvar handleTitleChange=useCallback(function(e){changePageAttribute('title',e.target.value);},[changePageAttribute]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.row,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.title,children:\"\\u9875\\u9762\\u6807\\u9898\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.content,children:/*#__PURE__*/_jsx(Input,{value:title,onChange:handleTitleChange})})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.buttons,children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:handleSaveButtonClick,children:\"\\u4FDD\\u5B58\\u57FA\\u7840\\u914D\\u7F6E\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",className:styles.reset,onClick:handleResetButtonClick,children:\"\\u91CD\\u7F6E\\u57FA\\u7840\\u914D\\u7F6E\"})]})]});};","map":{"version":3,"names":["React","useCallback","styles","useDispatch","useSelector","Button","Input","parseJsonByString","getChangeSchemaAction","getChangePageAttributeAction","post","useStore","dispatch","schema","state","homeManagePageReducer","changeSchema","changePageAttribute","key","value","BasicSetting","attributes","title","handleSaveButtonClick","JSON","stringify","then","handleResetButtonClick","window","localStorage","handleTitleChange","e","target","row","content","buttons","reset"],"sources":["/Users/mikey/Desktop/yc-blog/src/admin/pages/basicSetting/BasicSetting.jsx"],"sourcesContent":["import React, {useCallback} from 'react';\nimport styles from './style.module.scss';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Button, Input} from 'antd';\nimport {parseJsonByString} from \"../../../common/utils\";\nimport {getChangeSchemaAction, getChangePageAttributeAction} from \"../../redux/action\";\nimport {post} from \"../../../utils/http\";\n\n// 自定义 hooks 把重复的事情 集合起来 schema 传数据 取数据 统一管理\nconst useStore = () => {\n    const dispatch = useDispatch();\n    const schema = useSelector((state) => state.homeManagePageReducer.schema);\n    const changeSchema = (schema) => {\n        dispatch(getChangeSchemaAction(schema));\n    }\n    const changePageAttribute = (key, value) => {\n        dispatch(getChangePageAttributeAction(key, value));\n    }\n    return {schema, changePageAttribute, changeSchema};\n}\n\nexport const BasicSetting = () => {\n    // 折叠 收缩\n    const {changePageAttribute, schema = {}, changeSchema} = useStore();\n    const {attributes = {}} = schema;\n    const {title = ''} = attributes;\n\n    // 保存 数据存到数据库\n    const handleSaveButtonClick = () => {\n        post('/api/schema/save', {\n            schema: JSON.stringify(schema)\n        }).then(() => {\n        })\n    }\n    // 重置还原 最开始的想法是当你点击 Reset 方法的时候, 你需要做的只是 调用一下 resetSchema的方法就好了, 至于怎么重置交给子组件来决定\n    // 最后思考\n    const handleResetButtonClick = () => {\n        // 先获取最新的 schema\n        changeSchema(parseJsonByString(window.localStorage.schema, {}))\n    }\n    // 标题改变\n    const handleTitleChange = useCallback((e) => {\n        changePageAttribute('title', e.target.value);\n    }, [changePageAttribute]);\n    return (\n        <div>\n            <div className={styles.row}>\n                <div className={styles.title}>页面标题</div>\n                <div className={styles.content}>\n                    <Input value={title} onChange={handleTitleChange}/>\n                </div>\n            </div>\n            <div className={styles.buttons}>\n                <Button type='primary' onClick={handleSaveButtonClick}>保存基础配置</Button>\n                <Button type='primary' className={styles.reset} onClick={handleResetButtonClick}>重置基础配置</Button>\n            </div>\n        </div>\n    );\n};\n"],"mappings":"AAAA,MAAOA,MAAP,EAAeC,WAAf,KAAiC,OAAjC,CACA,MAAOC,OAAP,KAAmB,qBAAnB,CACA,OAAQC,WAAR,CAAqBC,WAArB,KAAuC,aAAvC,CACA,OAAQC,MAAR,CAAgBC,KAAhB,KAA4B,MAA5B,CACA,OAAQC,iBAAR,KAAgC,uBAAhC,CACA,OAAQC,qBAAR,CAA+BC,4BAA/B,KAAkE,oBAAlE,CACA,OAAQC,IAAR,KAAmB,qBAAnB,CAEA;wFACA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,EAAM,CACnB,GAAMC,SAAQ,CAAGT,WAAW,EAA5B,CACA,GAAMU,OAAM,CAAGT,WAAW,CAAC,SAACU,KAAD,QAAWA,MAAK,CAACC,qBAAN,CAA4BF,MAAvC,EAAD,CAA1B,CACA,GAAMG,aAAY,CAAG,QAAfA,aAAe,CAACH,MAAD,CAAY,CAC7BD,QAAQ,CAACJ,qBAAqB,CAACK,MAAD,CAAtB,CAAR,CACH,CAFD,CAGA,GAAMI,oBAAmB,CAAG,QAAtBA,oBAAsB,CAACC,GAAD,CAAMC,KAAN,CAAgB,CACxCP,QAAQ,CAACH,4BAA4B,CAACS,GAAD,CAAMC,KAAN,CAA7B,CAAR,CACH,CAFD,CAGA,MAAO,CAACN,MAAM,CAANA,MAAD,CAASI,mBAAmB,CAAnBA,mBAAT,CAA8BD,YAAY,CAAZA,YAA9B,CAAP,CACH,CAVD,CAYA,MAAO,IAAMI,aAAY,CAAG,QAAfA,aAAe,EAAM,CAC9B;AACA,cAAyDT,QAAQ,EAAjE,CAAOM,mBAAP,WAAOA,mBAAP,4BAA4BJ,MAA5B,CAA4BA,MAA5B,2BAAqC,EAArC,kBAAyCG,YAAzC,WAAyCA,YAAzC,CACA,uBAA0BH,MAA1B,CAAOQ,UAAP,CAAOA,UAAP,6BAAoB,EAApB,oBACA,sBAAqBA,UAArB,CAAOC,KAAP,CAAOA,KAAP,4BAAe,EAAf,mBAEA;AACA,GAAMC,sBAAqB,CAAG,QAAxBA,sBAAwB,EAAM,CAChCb,IAAI,CAAC,kBAAD,CAAqB,CACrBG,MAAM,CAAEW,IAAI,CAACC,SAAL,CAAeZ,MAAf,CADa,CAArB,CAAJ,CAEGa,IAFH,CAEQ,UAAM,CACb,CAHD,EAIH,CALD,CAMA;AACA;AACA,GAAMC,uBAAsB,CAAG,QAAzBA,uBAAyB,EAAM,CACjC;AACAX,YAAY,CAACT,iBAAiB,CAACqB,MAAM,CAACC,YAAP,CAAoBhB,MAArB,CAA6B,EAA7B,CAAlB,CAAZ,CACH,CAHD,CAIA;AACA,GAAMiB,kBAAiB,CAAG7B,WAAW,CAAC,SAAC8B,CAAD,CAAO,CACzCd,mBAAmB,CAAC,OAAD,CAAUc,CAAC,CAACC,MAAF,CAASb,KAAnB,CAAnB,CACH,CAFoC,CAElC,CAACF,mBAAD,CAFkC,CAArC,CAGA,mBACI,oCACI,aAAK,SAAS,CAAEf,MAAM,CAAC+B,GAAvB,wBACI,YAAK,SAAS,CAAE/B,MAAM,CAACoB,KAAvB,sCADJ,cAEI,YAAK,SAAS,CAAEpB,MAAM,CAACgC,OAAvB,uBACI,KAAC,KAAD,EAAO,KAAK,CAAEZ,KAAd,CAAqB,QAAQ,CAAEQ,iBAA/B,EADJ,EAFJ,GADJ,cAOI,aAAK,SAAS,CAAE5B,MAAM,CAACiC,OAAvB,wBACI,KAAC,MAAD,EAAQ,IAAI,CAAC,SAAb,CAAuB,OAAO,CAAEZ,qBAAhC,kDADJ,cAEI,KAAC,MAAD,EAAQ,IAAI,CAAC,SAAb,CAAuB,SAAS,CAAErB,MAAM,CAACkC,KAAzC,CAAgD,OAAO,CAAET,sBAAzD,kDAFJ,GAPJ,GADJ,CAcH,CArCM"},"metadata":{},"sourceType":"module"}
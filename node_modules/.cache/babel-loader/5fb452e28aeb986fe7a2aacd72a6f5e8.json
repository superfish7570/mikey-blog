{"ast":null,"code":"var tokenKey = '_authing_token';\nvar userKey = '_authing_user';\n\nvar AuthenticationTokenProvider =\n/** @class */\nfunction () {\n  function AuthenticationTokenProvider(options) {\n    this.options = options; // 为了兼容服务端不支持 localStorage 的情况\n\n    this.token = null;\n    this.user = null;\n  }\n\n  AuthenticationTokenProvider.prototype.setToken = function (token) {\n    if (typeof localStorage !== 'undefined') {\n      localStorage.setItem(tokenKey, token);\n    } else {\n      this.token = token;\n    }\n  };\n\n  AuthenticationTokenProvider.prototype.getToken = function () {\n    return typeof localStorage !== 'undefined' ? localStorage.getItem(tokenKey) || '' : this.token;\n  };\n\n  AuthenticationTokenProvider.prototype.getUser = function () {\n    return typeof localStorage !== 'undefined' ? localStorage.getItem(userKey) ? JSON.parse(localStorage.getItem(userKey)) : null : this.user;\n  };\n\n  AuthenticationTokenProvider.prototype.setUser = function (user) {\n    if (typeof localStorage !== 'undefined') {\n      localStorage.setItem(userKey, JSON.stringify(user));\n      localStorage.setItem(tokenKey, user.token);\n    } else {\n      this.user = user;\n      this.token = user.token;\n    }\n  };\n\n  AuthenticationTokenProvider.prototype.clearUser = function () {\n    if (typeof localStorage !== 'undefined') {\n      localStorage.removeItem(userKey);\n      localStorage.removeItem(tokenKey);\n    } else {\n      this.user = null;\n      this.token = null;\n    }\n  };\n\n  return AuthenticationTokenProvider;\n}();\n\nexport { AuthenticationTokenProvider };","map":{"version":3,"sources":["../../../../src/lib/authentication/AuthenticationTokenProvider.ts"],"names":[],"mappings":"AAGA,IAAM,QAAQ,GAAG,gBAAjB;AACA,IAAM,OAAO,GAAG,eAAhB;;AAEA,IAAA,2BAAA;AAAA;AAAA,YAAA;EAME,SAAA,2BAAA,CAAY,OAAZ,EAAgD;IAC9C,KAAK,OAAL,GAAe,OAAf,CAD8C,CAG9C;;IACA,KAAK,KAAL,GAAa,IAAb;IACA,KAAK,IAAL,GAAY,IAAZ;EACD;;EAED,2BAAA,CAAA,SAAA,CAAA,QAAA,GAAA,UAAS,KAAT,EAAsB;IACpB,IAAI,OAAO,YAAP,KAAwB,WAA5B,EAAyC;MACvC,YAAY,CAAC,OAAb,CAAqB,QAArB,EAA+B,KAA/B;IACD,CAFD,MAEO;MACL,KAAK,KAAL,GAAa,KAAb;IACD;EACF,CAND;;EAQA,2BAAA,CAAA,SAAA,CAAA,QAAA,GAAA,YAAA;IACE,OAAO,OAAO,YAAP,KAAwB,WAAxB,GACH,YAAY,CAAC,OAAb,CAAqB,QAArB,KAAkC,EAD/B,GAEH,KAAK,KAFT;EAGD,CAJD;;EAMA,2BAAA,CAAA,SAAA,CAAA,OAAA,GAAA,YAAA;IACE,OAAO,OAAO,YAAP,KAAwB,WAAxB,GACH,YAAY,CAAC,OAAb,CAAqB,OAArB,IACE,IAAI,CAAC,KAAL,CAAW,YAAY,CAAC,OAAb,CAAqB,OAArB,CAAX,CADF,GAEE,IAHC,GAIH,KAAK,IAJT;EAKD,CAND;;EAQA,2BAAA,CAAA,SAAA,CAAA,OAAA,GAAA,UAAQ,IAAR,EAAkB;IAChB,IAAI,OAAO,YAAP,KAAwB,WAA5B,EAAyC;MACvC,YAAY,CAAC,OAAb,CAAqB,OAArB,EAA8B,IAAI,CAAC,SAAL,CAAe,IAAf,CAA9B;MACA,YAAY,CAAC,OAAb,CAAqB,QAArB,EAA+B,IAAI,CAAC,KAApC;IACD,CAHD,MAGO;MACL,KAAK,IAAL,GAAY,IAAZ;MACA,KAAK,KAAL,GAAa,IAAI,CAAC,KAAlB;IACD;EACF,CARD;;EAUA,2BAAA,CAAA,SAAA,CAAA,SAAA,GAAA,YAAA;IACE,IAAI,OAAO,YAAP,KAAwB,WAA5B,EAAyC;MACvC,YAAY,CAAC,UAAb,CAAwB,OAAxB;MACA,YAAY,CAAC,UAAb,CAAwB,QAAxB;IACD,CAHD,MAGO;MACL,KAAK,IAAL,GAAY,IAAZ;MACA,KAAK,KAAL,GAAa,IAAb;IACD;EACF,CARD;;EASF,OAAA,2BAAA;AAAC,CAvDD,EAAA","sourceRoot":"","sourcesContent":["var tokenKey = '_authing_token';\nvar userKey = '_authing_user';\nvar AuthenticationTokenProvider = /** @class */ (function () {\n    function AuthenticationTokenProvider(options) {\n        this.options = options;\n        // 为了兼容服务端不支持 localStorage 的情况\n        this.token = null;\n        this.user = null;\n    }\n    AuthenticationTokenProvider.prototype.setToken = function (token) {\n        if (typeof localStorage !== 'undefined') {\n            localStorage.setItem(tokenKey, token);\n        }\n        else {\n            this.token = token;\n        }\n    };\n    AuthenticationTokenProvider.prototype.getToken = function () {\n        return typeof localStorage !== 'undefined'\n            ? localStorage.getItem(tokenKey) || ''\n            : this.token;\n    };\n    AuthenticationTokenProvider.prototype.getUser = function () {\n        return typeof localStorage !== 'undefined'\n            ? localStorage.getItem(userKey)\n                ? JSON.parse(localStorage.getItem(userKey))\n                : null\n            : this.user;\n    };\n    AuthenticationTokenProvider.prototype.setUser = function (user) {\n        if (typeof localStorage !== 'undefined') {\n            localStorage.setItem(userKey, JSON.stringify(user));\n            localStorage.setItem(tokenKey, user.token);\n        }\n        else {\n            this.user = user;\n            this.token = user.token;\n        }\n    };\n    AuthenticationTokenProvider.prototype.clearUser = function () {\n        if (typeof localStorage !== 'undefined') {\n            localStorage.removeItem(userKey);\n            localStorage.removeItem(tokenKey);\n        }\n        else {\n            this.user = null;\n            this.token = null;\n        }\n    };\n    return AuthenticationTokenProvider;\n}());\nexport { AuthenticationTokenProvider };\n//# sourceMappingURL=AuthenticationTokenProvider.js.map"]},"metadata":{},"sourceType":"module"}
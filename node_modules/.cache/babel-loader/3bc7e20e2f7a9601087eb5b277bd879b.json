{"ast":null,"code":"import _slicedToArray from\"/Users/mikey/Desktop/yc-blog/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{parseJsonByString}from\"../../../utils/paresJsonByString\";import{Banner,Footer,List}from\"../../components\";import{Helmet}from\"react-helmet\";import request from\"../../../utils/service\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var map={Footer:Footer,Banner:Banner,List:List};var render=function render(index,item){var Component=map[item.name];return Component?/*#__PURE__*/_jsx(Component,{schema:item},index):null;};export var HomePage=function HomePage(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),pageSchema=_useState2[0],setPageSchema=_useState2[1];var _pageSchema$children=pageSchema.children,children=_pageSchema$children===void 0?[]:_pageSchema$children,_pageSchema$attribute=pageSchema.attributes,attributes=_pageSchema$attribute===void 0?{}:_pageSchema$attribute;// 副作用,在数据库取东西\nuseEffect(function(){request.get('/api/schema/getLatestOne').then(function(res){var data=res===null||res===void 0?void 0:res.data;data&&setPageSchema(parseJsonByString(data.schema,{}));});},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsxs(\"title\",{children:[\" \",(attributes===null||attributes===void 0?void 0:attributes.title)||'',\" \"]})}),children.map(function(item,index){return render(index,item);})]});};","map":{"version":3,"names":["React","useState","useEffect","parseJsonByString","Banner","Footer","List","Helmet","request","map","render","index","item","Component","name","HomePage","pageSchema","setPageSchema","children","attributes","get","then","res","data","schema","title"],"sources":["/Users/mikey/Desktop/yc-blog/src/front/page/home/HomePage.jsx"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport {parseJsonByString} from \"../../../utils/paresJsonByString\";\nimport {Banner, Footer, List} from \"../../components\";\nimport {Helmet} from \"react-helmet\";\nimport request from \"../../../utils/service\";\nconst map = {Footer, Banner, List};\n\nconst render = (index, item) => {\n    const Component = map[item.name];\n    return Component ? <Component key={index} schema={item}/> : null;\n}\n\nexport const HomePage = () => {\n    const [pageSchema, setPageSchema] = useState({});\n    const {children = [], attributes = {}} = pageSchema;\n    // 副作用,在数据库取东西\n    useEffect(() => {\n        request.get('/api/schema/getLatestOne').then((res) => {\n            const data = res?.data;\n            data && setPageSchema(parseJsonByString(data.schema,{}));\n        });\n    }, [])\n\n    return (\n        <div>\n            <Helmet>\n                <title> {attributes?.title || ''} </title>\n            </Helmet>\n            {children.map((item, index) => render(index, item))}\n        </div>\n    );\n}\n"],"mappings":"kHAAA,MAAOA,MAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,OAAQC,iBAAR,KAAgC,kCAAhC,CACA,OAAQC,MAAR,CAAgBC,MAAhB,CAAwBC,IAAxB,KAAmC,kBAAnC,CACA,OAAQC,MAAR,KAAqB,cAArB,CACA,MAAOC,QAAP,KAAoB,wBAApB,C,wFACA,GAAMC,IAAG,CAAG,CAACJ,MAAM,CAANA,MAAD,CAASD,MAAM,CAANA,MAAT,CAAiBE,IAAI,CAAJA,IAAjB,CAAZ,CAEA,GAAMI,OAAM,CAAG,QAATA,OAAS,CAACC,KAAD,CAAQC,IAAR,CAAiB,CAC5B,GAAMC,UAAS,CAAGJ,GAAG,CAACG,IAAI,CAACE,IAAN,CAArB,CACA,MAAOD,UAAS,cAAG,KAAC,SAAD,EAAuB,MAAM,CAAED,IAA/B,EAAgBD,KAAhB,CAAH,CAA4C,IAA5D,CACH,CAHD,CAKA,MAAO,IAAMI,SAAQ,CAAG,QAAXA,SAAW,EAAM,CAC1B,cAAoCd,QAAQ,CAAC,EAAD,CAA5C,wCAAOe,UAAP,eAAmBC,aAAnB,eACA,yBAAyCD,UAAzC,CAAOE,QAAP,CAAOA,QAAP,+BAAkB,EAAlB,4CAAyCF,UAAzC,CAAsBG,UAAtB,CAAsBA,UAAtB,gCAAmC,EAAnC,uBACA;AACAjB,SAAS,CAAC,UAAM,CACZM,OAAO,CAACY,GAAR,CAAY,0BAAZ,EAAwCC,IAAxC,CAA6C,SAACC,GAAD,CAAS,CAClD,GAAMC,KAAI,CAAGD,GAAH,SAAGA,GAAH,iBAAGA,GAAG,CAAEC,IAAlB,CACAA,IAAI,EAAIN,aAAa,CAACd,iBAAiB,CAACoB,IAAI,CAACC,MAAN,CAAa,EAAb,CAAlB,CAArB,CACH,CAHD,EAIH,CALQ,CAKN,EALM,CAAT,CAOA,mBACI,oCACI,KAAC,MAAD,wBACI,6BAAS,CAAAL,UAAU,OAAV,EAAAA,UAAU,SAAV,QAAAA,UAAU,CAAEM,KAAZ,GAAqB,EAA9B,OADJ,EADJ,CAIKP,QAAQ,CAACT,GAAT,CAAa,SAACG,IAAD,CAAOD,KAAP,QAAiBD,OAAM,CAACC,KAAD,CAAQC,IAAR,CAAvB,EAAb,CAJL,GADJ,CAQH,CAnBM"},"metadata":{},"sourceType":"module"}
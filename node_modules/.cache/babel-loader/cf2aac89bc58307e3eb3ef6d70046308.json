{"ast":null,"code":"import _slicedToArray from\"/Users/mikey/Desktop/yc-blog/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import ReactDOM from'react-dom';import{HashRouter as Router,Switch,Route,Link}from'react-router-dom';import{BasicSetting,HomeManagePage,Login}from\"./pages\";import{Provider}from\"react-redux\";import store from\"./redux/store\";import'./style.scss';import\"normalize.css\";import'antd/dist/antd.css';import styles from'./style.module.scss';import{Layout,Menu}from\"antd\";import{parseJsonByString}from\"../utils/paresJsonByString\";import{useStore}from\"./hook/useStore\";import request from\"../utils/service\";import{getLoginStatus,cleanLoginData}from\"./utils/login\";import{AuthenticationClient}from\"authing-js-sdk\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var authClient=new AuthenticationClient({appId:\"63326c6fc50edca9bc452318\"});var Header=Layout.Header,Sider=Layout.Sider,Content=Layout.Content;// 自定义的hooks\nvar useCollapsed=function useCollapsed(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),collapsed=_useState2[0],setCollapsed=_useState2[1];var toggleCollapsed=function toggleCollapsed(){return setCollapsed(!collapsed);};return{collapsed:collapsed,toggleCollapsed:toggleCollapsed};};var Wrapper=function Wrapper(){var handleHomePage=function handleHomePage(){return window.location.href='/';};var _useCollapsed=useCollapsed(),collapsed=_useCollapsed.collapsed,toggleCollapsed=_useCollapsed.toggleCollapsed;var _useStore=useStore(),changeSchema=_useStore.changeSchema;var login=getLoginStatus();var photo=window.localStorage.photo;useEffect(function(){request.get('/api/schema/getLatestOne').then(function(res){var data=res===null||res===void 0?void 0:res.data;data&&changeSchema(parseJsonByString(data.schema,{}));});},[changeSchema]);// 点击图片退出登录\nvar handleLogout=function handleLogout(){var user=authClient.getCurrentUser();if(!user){alert(\"你还没有登录,请先登录\");}authClient.logout();alert(\"登出成功\");cleanLoginData();window.location.reload();};return login?/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsx(Sider,{className:styles.sidebar,trigger:null,collapsible:true,collapsed:collapsed,children:/*#__PURE__*/_jsxs(Menu,{theme:\"dark\",mode:\"inline\",defaultSelectedKeys:['adminHome'],children:[/*#__PURE__*/_jsx(Menu.Item,{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"span\",{className:\"iconfont\",children:\"\\uE821\\u9996\\u9875\\u5185\\u5BB9\\u7BA1\\u7406\"})})},'adminHome'),/*#__PURE__*/_jsx(Menu.Item,{children:/*#__PURE__*/_jsx(Link,{to:\"/setting\",children:/*#__PURE__*/_jsx(\"span\",{className:\"iconfont\",children:\"\\uE821\\u57FA\\u7840\\u5185\\u5BB9\\u914D\\u7F6E\"})})},'adminSetting'),/*#__PURE__*/_jsx(Menu.Item,{onClick:handleHomePage,children:/*#__PURE__*/_jsx(\"span\",{className:\"iconfont\",children:\"\\uE629\\u8FD4\\u56DE\\u7528\\u6237\\u9875\\u9762\"})},'adminBack')]})}),/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsxs(Header,{className:styles.header,children:[collapsed?/*#__PURE__*/_jsx(\"span\",{className:\"iconfont\",onClick:toggleCollapsed,children:\"\\uE62C\"}):/*#__PURE__*/_jsx(\"span\",{className:\"iconfont\",onClick:toggleCollapsed,children:\"\\uE62A\"}),/*#__PURE__*/_jsx(\"img\",{className:styles.avatar,src:photo,alt:\"avatar\",onClick:handleLogout})]}),/*#__PURE__*/_jsx(Content,{className:styles.content,children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:HomeManagePage}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/setting\",component:BasicSetting}),/*#__PURE__*/_jsx(Route,{})]})})]})]})}):/*#__PURE__*/_jsx(Login,{});};ReactDOM.render(/*#__PURE__*/_jsx(Provider,{store:store,children:/*#__PURE__*/_jsx(Wrapper,{})}),document.getElementById('root'));","map":{"version":3,"names":["React","useState","useEffect","ReactDOM","HashRouter","Router","Switch","Route","Link","BasicSetting","HomeManagePage","Login","Provider","store","styles","Layout","Menu","parseJsonByString","useStore","request","getLoginStatus","cleanLoginData","AuthenticationClient","authClient","appId","Header","Sider","Content","useCollapsed","collapsed","setCollapsed","toggleCollapsed","Wrapper","handleHomePage","window","location","href","changeSchema","login","photo","localStorage","get","then","res","data","schema","handleLogout","user","getCurrentUser","alert","logout","reload","sidebar","header","avatar","content","render","document","getElementById"],"sources":["/Users/mikey/Desktop/yc-blog/src/admin/index.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport ReactDOM from 'react-dom';\nimport {HashRouter as Router, Switch, Route, Link} from 'react-router-dom';\nimport {BasicSetting, HomeManagePage, Login} from \"./pages\";\n\nimport {Provider} from \"react-redux\";\nimport store from \"./redux/store\";\n\nimport './style.scss';\nimport \"normalize.css\";\nimport 'antd/dist/antd.css';\n\nimport styles from './style.module.scss';\nimport {Layout, Menu} from \"antd\";\nimport {parseJsonByString} from \"../utils/paresJsonByString\";\nimport {useStore} from \"./hook/useStore\";\nimport request from \"../utils/service\";\nimport {getLoginStatus,cleanLoginData} from \"./utils/login\";\nimport {AuthenticationClient} from \"authing-js-sdk\";\n\nconst authClient = new AuthenticationClient({\n    appId: \"63326c6fc50edca9bc452318\",\n});\n\nconst {Header, Sider, Content} = Layout;\n// 自定义的hooks\nconst useCollapsed = () => {\n    const [collapsed, setCollapsed] = useState(false);\n    const toggleCollapsed = () => setCollapsed(!collapsed);\n    return {collapsed, toggleCollapsed};\n}\nconst Wrapper = () => {\n    const handleHomePage = () => window.location.href = '/';\n    const {collapsed, toggleCollapsed} = useCollapsed();\n    const {changeSchema} = useStore();\n    const login = getLoginStatus();\n    const photo = window.localStorage.photo;\n    useEffect(() => {\n        request.get('/api/schema/getLatestOne').then((res) => {\n            const data = res?.data;\n            data && changeSchema(parseJsonByString(data.schema, {}));\n        })\n    }, [changeSchema]);\n\n    // 点击图片退出登录\n    const handleLogout = () => {\n        const user = authClient.getCurrentUser();\n        if (!user) {\n            alert(\"你还没有登录,请先登录\");\n        }\n        authClient.logout();\n        alert(\"登出成功\");\n        cleanLoginData();\n        window.location.reload();\n    }\n\n    return login ? (\n        <Router>\n            <Layout>\n                <Sider className={styles.sidebar} trigger={null} collapsible collapsed={collapsed}>\n                    <Menu theme=\"dark\" mode=\"inline\" defaultSelectedKeys={['adminHome']}>\n                        <Menu.Item key='adminHome'>\n                            <Link to='/'>\n                                <span className='iconfont'>&#xe821;首页内容管理</span>\n                            </Link>\n                        </Menu.Item>\n                        <Menu.Item key='adminSetting'>\n                            <Link to='/setting'>\n                                <span className='iconfont'>&#xe821;基础内容配置</span>\n                            </Link>\n                        </Menu.Item>\n                        <Menu.Item key='adminBack' onClick={handleHomePage}>\n                            <span className='iconfont'>&#xe629;返回用户页面</span>\n                        </Menu.Item>\n                    </Menu>\n                </Sider>\n                <Layout>\n                    <Header className={styles.header}>\n                        {collapsed ?\n                            <span className='iconfont' onClick={toggleCollapsed}>&#xe62c;</span>\n                            : <span className='iconfont' onClick={toggleCollapsed}>&#xe62a;</span>\n                        }\n                        <img className={styles.avatar} src={photo} alt='avatar' onClick={handleLogout}/>\n                    </Header>\n                    <Content className={styles.content}>\n                        <Switch>\n                            <Route exact path='/' component={HomeManagePage}></Route>\n                            <Route exact path='/setting' component={BasicSetting}></Route>\n                            <Route></Route>\n                        </Switch>\n                    </Content>\n                </Layout>\n            </Layout>\n        </Router>\n    ) : <Login/>\n}\n\n\nReactDOM.render(\n    <Provider store={store}>\n        <Wrapper/>\n    </Provider>,\n    document.getElementById('root')\n);\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}